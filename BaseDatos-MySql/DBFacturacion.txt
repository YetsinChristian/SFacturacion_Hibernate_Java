drop DATABASE DBFACTURACION;
------------------------
CREATE DATABASE DBFACTURACION;

USE DBFACTURACION;

CREATE TABLE Categoria (
	cat_cod int NOT NULL Primary KEY auto_increment,
	cat_des varchar(50) NOT NULL,
	vista int)
	AUTO_INCREMENT = 10000,
	ENGINE = innodb;

CREATE TABLE Articulos (
	art_cod int NOT NULL Primary KEY auto_increment,
	art_nom varchar (100) NULL ,
	art_uni varchar (10) NULL ,
	art_pre decimal(8,2) NULL ,
	art_stk int NULL,
	cat_cod int NOT NULL,
	vista INT,
	constraint fk_cat_cod foreign key(cat_cod)
    references categoria(cat_cod)
	 )
	 AUTO_INCREMENT = 10000,
	ENGINE = innodb;

	
CREATE TABLE Clientes (
	cli_cod int NOT NULL Primary KEY auto_increment,
	cli_nom varchar(50) NULL ,
	cli_tel varchar(10) null ,
	cli_cor varchar(35) NULL ,
	cli_dir varchar(30) NULL,
  	cli_cre decimal(8,2) NULL,
  vista INT )
  AUTO_INCREMENT = 10000,
	ENGINE = innodb;

 create TABLE Vendedor(
	ven_cod int not null primary KEY auto_increment,
	ven_nom varchar (35) NULL ,
	ven_ape varchar (35) NULL ,
	ven_Fnac varchar(35) NULL, 
	ven_cel varchar (35) NULL ,
	ven_Fing varchar(35) NULL, 
	ven_login varchar(15) NULL,
	ven_clave varchar(15) NULL,
	vista INT)
	AUTO_INCREMENT = 10000,
	ENGINE = innodb;

  CREATE TABLE Fac_cabe (
	fac_num int Primary KEY auto_increment,
	fac_fec varchar(35) NULL ,
	cli_cod int NULL ,
	fac_tipo char (1) NULL check(fac_tipo in('F','B')),
  ven_cod int NULL,
	fac_est int NOT NULL,
	fac_subt decimal(5,2),
	fac_igv decimal(5,2),
	fac_tot decimal(5,2),
	vista INT,
	constraint fk_cli_cod foreign key(cli_cod)
	references clientes(cli_cod),
	constraint fk_ven_cod foreign key(ven_cod)
	references vendedor(ven_cod)
		 ) AUTO_INCREMENT = 10000,
	ENGINE = innodb;
     


CREATE TABLE Fac_deta (
	dfac_num INT PRIMARY KEY AUTO_INCREMENT,
	fac_num int NOT NULL ,
	art_cod int NOT NULL  ,
	art_can  int NULL ,
 	precio_art numeric(5,2))
	 AUTO_INCREMENT = 10000;

alter table fac_deta
	add constraint fk_fac_num foreign key(fac_num)
		references fac_cabe(fac_num);
    
alter table fac_deta
	add constraint fk_art_cod foreign key(art_cod)
		references articulos(art_cod);

INSERT INTO CATEGORIA VALUES (default, 'CARNES',1);
INSERT INTO CATEGORIA VALUES (default, 'POLLOS-AVES',1);
INSERT INTO CATEGORIA VALUES (default, 'PESCADERIA',1);
INSERT INTO CATEGORIA VALUES (default, 'FRUTAS',1);
INSERT INTO CATEGORIA VALUES (default, 'VERDURAS',1);
INSERT INTO CATEGORIA VALUES (default, 'PANADERIA',1);
INSERT INTO CATEGORIA VALUES (default, 'CONFITERIA Y REPOSTERIA',1);
INSERT INTO CATEGORIA VALUES (default, 'EMBUTIDOS',1);
INSERT INTO CATEGORIA VALUES (default, 'LACTEOS',1);
INSERT INTO CATEGORIA VALUES (default, 'GOLOSINAS Y SNAKCS',1);
INSERT INTO CATEGORIA VALUES (default, 'BEBIDAS SIN ALCOHOL',1);
INSERT INTO CATEGORIA VALUES (default, 'LICORES Y TABACO',1);
INSERT INTO CATEGORIA VALUES (default, 'CUIDADO PERSONAL',1);
INSERT INTO CATEGORIA VALUES (default, 'LIMPIEZA DEL HOGAR',1);
INSERT INTO CATEGORIA VALUES (default, 'MASCOTAS',1);
INSERT INTO CATEGORIA VALUES (default, 'FERRETERIA',1);
INSERT INTO CATEGORIA VALUES (default, 'JUGUETERIA',1);
INSERT INTO CATEGORIA VALUES (default, 'LIBRERIA',1);
INSERT INTO CATEGORIA VALUES (default, 'ABARROTES',1);

INSERT INTO Clientes VALUES (default,'Yetsin Gonzales','99999999','yetsin@gmail.com','Av.Proceres',2999.99,1);
INSERT INTO Clientes VALUES (default,'Luis Mescco','99999998','luis@gmail.com','Av.Piramide',3999.99,1);
INSERT INTO Clientes VALUES (default,'Ivan Ramos','99999997','ivan@gmail.com','Bayovar',3999.99,1);
INSERT INTO Clientes VALUES (default,'Monica Rivera','99999996','monica@gmail.com','Av. Malecon checa',2999.99,1);

INSERT INTO Vendedor VALUES (default,'Monica Pilar','Rivera Romero','1997/06/05','99999999','2019/06/05','MRivera','123456',1);
INSERT INTO Vendedor VALUES (default,'Yetsin','Gonzales Perca','1997/10/16','99999998','2019/06/05','YPerca','123456',1);
INSERT INTO Vendedor VALUES (default,'Luis','Mescco','1997/06/15','99999997','2019/05/06','LMesco','123456',1);

INSERT INTO Articulos VALUES (default,'CORTE PREMIUN RES','KILOS',28.5,200,10000,1);
INSERT INTO Articulos VALUES (default,'PAVO SAN FERNANDO','KILOS',12.5,300,10002,1);
INSERT INTO Articulos VALUES (default,'SALMON','KILOS',38.5,100,10003,1);
INSERT INTO Articulos VALUES (default,'SANDIA DE TEMPORADA','KILOS',1.5,200,10003,1);
INSERT INTO Articulos VALUES (default,'PAPA AMARILLA','KILOS',2.5,200,10004,1);
INSERT INTO Articulos VALUES (default,'PAN DE MOLDE INTEGRAL','UNIDAD',6.5,200,10005,1);
INSERT INTO Articulos VALUES (default,'EMPANADA PREMIUM','UNIDAD',5.5,200,10006,1);
INSERT INTO Articulos VALUES (default,'CHICHARRON PRENSA PREMIUN','KILOS',10.5,200,10007,1);
INSERT INTO Articulos VALUES (default,'LECHE ENTERA','LITROS',4.5,200,10008,1);
